<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.qc.wework.msg.mapper.MsgMapper">

    <resultMap type="com.qc.wework.msg.dto.MsgRoom" id="MsgRoomMap">
        <id property="id" column="id" />
        <result property="history_id" column="history_id" jdbcType="INTEGER"/>
        <result property="msgid" column="msgid" jdbcType="VARCHAR"/>
        <result property="action" column="encrypt_random_key" jdbcType="VARCHAR"/>
        <result property="msgtype" column="msgtype" jdbcType="VARCHAR"/>
        <result property="content" column="content" jdbcType="LONGVARCHAR"/>
    </resultMap>

    <select id="list" resultMap="MsgRoomMap">
        select
        *
        from chat_data_history
        where id > #{historyId}
        limit #{limit}
    </select>

<!--    <select id="getLatestParsedIdOfMediaData" resultType="java.lang.Integer">-->
<!--        select-->
<!--        history_id-->
<!--        from chat_data_parsed-->
<!--        where extra_media=1-->
<!--        <if test="mediaTypes.size() > 0">-->
<!--            and msgtype in-->
<!--            <foreach collection="mediaTypes" item="mt" separator="," open="(" close=")">-->
<!--                #{mt}-->
<!--            </foreach>-->
<!--        </if>-->

<!--        order by history_id desc-->
<!--        limit 1-->
<!--    </select>-->

<!--    <select id="getParseChatDataItem" resultMap="MediaContentMap">-->
<!--        select-->
<!--          *-->
<!--        from chat_data_parsed-->
<!--        limit #{limit} offset #{offset}-->
<!--    </select>-->

<!--    <select id="getUnParseMediaItem" resultMap="MediaContentMap">-->
<!--        select-->
<!--        *-->
<!--        from chat_data_parsed-->
<!--        where history_id > #{historyId} and extra_media=0-->
<!--        <if test="mediaTypes.size() > 0">-->
<!--            and msgtype in-->
<!--            <foreach collection="mediaTypes" item="mt" separator="," open="(" close=")">-->
<!--                #{mt}-->
<!--            </foreach>-->
<!--        </if>-->
<!--        limit #{limit}-->
<!--    </select>-->
<!--    -->
<!--    <select id="getChatDataParsedByHistoryId" resultMap="MediaContentMap">-->
<!--        select * from chat_data_parsed-->
<!--        where history_id=#{historyId}-->
<!--    </select>-->


</mapper>